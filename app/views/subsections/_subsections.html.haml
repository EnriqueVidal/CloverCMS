%table.list
  %thead
    %tr
      - sort_headers_for :subsection, %w{name pages section created_at updated_at operations} do |header|
        - "Last Changed" if header == 'updated_at'

  - @subsections.each do |subsection|
    %tr{ :class => cycle(:odd, :even) }
      %td= subsection.name

      - if subsection.pages.count >= 1
        %td
          = link_to 'View Pages', subsection_pages_path(subsection), :class => 'icon icon_bullet_page'
      - else
        %td
          = link_to 'New Page', new_subsection_page_path(subsection), :class => 'icon icon_bullet_add'

      %td= subsection.section.name
      %td= subsection.created_at.strftime("%B, %d %Y")
      %td= subsection.updated_at.strftime("%B, %d %Y")
      %td
        = link_to 'Edit', edit_subsection_path(subsection), :class => 'icon icon_bullet_pencil'
        = link_to 'Destroy', subsection, :confirm => 'Are you sure?', :method => :delete, :class => 'icon icon_bullet_delete'

= will_paginate @subsections

