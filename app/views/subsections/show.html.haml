%h2= 'Subsection ' + @subsection.name

#subsection_pages
  %h3= 'Subsection ' + @subsection.name + ' pages.'
  %br
  %table.list
    %thead
      %tr
        %th Name
        %th Section
        %th Created at
        %th Last updated at
        %th Operations

    - oddity = 1
    - @pages.each do |page|
      %tr{ :class => ( oddity % 2 == 0 )? '' : 'odd' }
        - oddity = oddity + 1
        - page_link = '/' + page.subsection.section.name + '/' + page.subsection.name + '/' + page.name + '.html'

        %td= link_to page.title, page_link, :target => :_blank
        %td= link_to @subsection.section.name, section_path(@subsection.section)
        %td= page.created_at.strftime("%B, %d %Y")
        %td= page.updated_at.strftime("%B, %d %Y")
        %td
          = link_to 'Edit',       edit_page_path(page)
          = link_to 'Destroy',    page, :confirm => 'Are you sure?', :method => :delete

  = will_paginate @pages


#operations_placeholder{ :style => 'display: none;' }
  %h3 Subsection Operations
  = link_to 'Edit', edit_subsection_path(@subsection), :class => 'edit'
  %br
  = link_to 'Destroy',  @subsection, :confirm => 'Are you sure?', :method => :delete, :class => 'delete'

  %h3 Pages Operations
  = link_to 'Add Page', new_subsection_page_path(@subsection), :class => 'add'

%script{ :type => 'text/javascript' }
  //<![[CDATA
  $('sidebar').appendChild($('operations_placeholder'));
  $('operations_placeholder').toggle();
  //]>

